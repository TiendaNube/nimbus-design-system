---
description: Use this rule whenever creating new SVG icons for the project.   It specifies step-by-step requirements that must be strictly followed.
globs: 
alwaysApply: false
---

# SVG Icon CRUD Steps

Follow each step strictly and in the given order, according to the requested operation: **Create, Read, Edit (Update), or Delete**.

----

## Pre-conditions (ALWAYS CHECK BEFORE CHANGES)
1. - For **Create**: Search for icons in the repository with strictly equal or visually similar names.
        - If a match exists, notify the user.
    - For **Edit/Delete**: Ensure the target icon exists. If not, report to user.

2. **SVG Quality & Optimization Check (for Create/Edit):**
   - Analyze SVG for bad practices: excessive/unnecessary elements, comments, or metadata.
   - If issues are found, return feedback and recommend using SVGOMG (https://jakearchibald.github.io/svgomg/)
  re optimization issues. They will be fixed by the build process.
   - If missing `width`/`height`/`viewBox`, add or fix them (`width="16" height="16" viewBox="0 0 16 16"`).
    - Example: 
        ```html
            <svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor" ...>
        ```
----

## ðŸš¦ Operations

### **Read (List Icons)**
- List all icon files in `packages/icons/src/assets`.
- List the icon names in **PascalCase format**, sorted alphabetically.
- Output the list.

----

### **Create**
1. **File Creation**
   - Create new SVG file in `packages/icons/src/assets`, lowercase and dash-separated (e.g., `shopping-cart.svg`).
   - Exported icon component should be PascalCase + "Icon" (e.g., `ShoppingCartIcon`).
2. **SVG Attributes**
   - Ensure: `width="16" height="16" viewBox="0 0 16 16"`.
3. **Continue with Changelog, Yarn versioning (as a MINOR bump), and PR steps below.**

----

### **Edit (Update)**
1. **Locate SVG file by input name** in `packages/icons/src/assets`.
2. **Modify** the SVG according to the request (replace with new codatecified).
   - Maintain required attributes: `width="16" height="16" viewBox="0 0 16 16"`.
3. **Continue with Changelog, Yarn versioning (as a PATCH bump), and PR steps below.**

----

### **Delete**
1. **Locate SVG file by input name** in `packages/icons/src/assets`.
2. **Delete** the SVG file.
3. **Continue with Changelog, Yarn versioning (as a MAJOR bump), and PR steps below.**

----

## **Required Steps**
### 1. **Changelog updates**

* Update the `packages/icons/CHANGELOG.md` file with the new icon.

### General Structure

```md
## YYYY-MM-DD `VERSION` (with TODAY'S DATE) (minor version bump from the previous version) 

#### ðŸŽ‰ New features

- Adds `[icon-name]` icon. (#PR_NUMBER by @NimbusAgent)
```

Note: The PR number should be the number of the current PR that creates the icon. It should be the latest PR number in this Github repository.

### 2. **Yarn versioning file**
4.1. Run `yarn workspaces foreach --all version decline --deferred` to create a new version file in `.yarn/versions` declining by default everything.. THIS STEP IS CRITICAL.
4.2. In the generated file inside `.yarn/versions` move the `@nimbus-ds/icons` package into the releases section with a version bump depending on the type of change. Example:

```yml
releases:
  @nimbus-ds/icons: patch/minor/major

declined: 
    nimbus-design-system
    ...rest of the packages
```
* ALWAYS decline the `nimbus-design-system` root package and all packages that are not `@nimbus-ds/icons`.

4.3. Run `yarn bump:check` and read the errors.

**When creating a PR:**
   - Commit using the format: `feat(icons): add [icon-name] icon`
   - Always create a branch from the latest `main`.
   - Push branch and open a PR titled: `feat: Add [icon-name] icon`.

## **Never Do the Following**
* Do not place icon files outside of `packages/icons/src/assets`.
* Do not omit `width` and `height` attributes.
* Do not use uppercase letters or underscores in filenames.
* Do not directly commit changes to `main`. Always use a dedicated branch FROM MAIN and open a PR.
* NEVER run `yarn bump:check --interactive`. Modify the version file manually instead.
